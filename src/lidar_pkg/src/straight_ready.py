#!/usr/bin/env python3

import numpy as np
import rospy
from std_msgs.msg import Float64
import matplotlib.pyplot as plt
import matplotlib.animation as animation

# UTM 경로 (이미 변환된 UTM x, y 좌표)
path_x=[308078.924885756, 308078.924885756, 308078.9337498768, 308078.93400413106, 308078.93400413106, 308078.93400413106, 308078.93400413106, 308078.93400413106, 308078.9337498768, 308078.94286825194, 308078.94286825194, 308078.94286825194, 308078.94286825194, 308078.94286825194, 308078.94286825194, 308078.94286825194, 308078.94286825194, 308078.94286825194, 308078.94286825194, 308078.9426139976, 308078.9426139976, 308078.9426139976, 308078.95147812075, 308078.95147812075, 308078.95147812075, 308078.95147812075, 308078.95147812075, 308078.95147812075, 308078.9426139976, 308078.9426139976, 308078.95147812075, 308078.95147812075, 308078.9426139976, 308078.9426139976, 308078.9426139976, 308078.9334956225, 308078.9334956225, 308078.9246315016, 308078.92437724734, 308078.92437724734, 308078.91551312647, 308078.9152588721, 308078.9152588721, 308078.9061404969, 308078.9061404969, 308078.897276376, 308078.897276376, 308078.8977848847, 308078.898039139, 308078.8977848847, 308078.90690325986, 308078.89829339343, 308078.898039139, 308078.8977848847, 308078.8977848847, 308078.88031089725, 308078.86283690773, 308078.84536292264, 308078.83675305394, 308078.8278889332, 308078.8276346787, 308078.8364987996, 308078.84510866826, 308078.85422704124, 308078.8539727869, 308078.84510866826, 308078.8537185324, 308078.8537185324, 308078.85346427804, 308078.85346427804, 308078.85346427804, 308078.8537185324, 308078.8448544139, 308078.8448544139, 308078.8448544139, 308078.8448544139, 308078.8448544139, 308078.83599029074, 308078.8357360363, 308078.8357360363, 308078.83599029074, 308078.82687191543, 308078.82687191543, 308078.8271261698, 308078.82687191543, 308078.81800779456, 308078.81800779456, 308078.81800779456, 308078.81800779456, 308078.80914367374, 308078.80914367374, 308078.80914367374, 308078.8000252984, 308078.79116117745, 308078.7822970565, 308078.7734329357, 308078.7645688148, 308078.7645688148, 308078.75570469163, 308078.75570469163, 308078.7468405707, 308078.7379764521, 308078.7377221976, 308078.7377221976, 308078.7377221976, 308078.7288580744, 308078.7288580744, 308078.7288580744, 308078.7199939535, 308078.7199939535, 308078.7199939535, 308078.7199939535, 308078.71112983266, 308078.71112983266, 308078.7113840872, 308078.71112983266, 308078.7025199663, 308078.7025199663, 308078.7025199663, 308078.7025199663, 308078.69365584536, 308078.69365584536, 308078.69365584536, 308078.69365584536, 308078.69365584536, 308078.69365584536, 308078.68479172455, 308078.68479172455, 308078.68479172455, 308078.6759276036, 308078.6670634828, 308078.6670634828, 308078.6670634828, 308078.6581993619, 308078.6581993619, 308078.6581993619, 308078.6581993619, 308078.6581993619, 308078.6581993619, 308078.64933523873, 308078.64933523873, 308078.64933523873, 308078.64933523873, 308078.64933523873, 308078.6404711178, 308078.6404711178, 308078.6404711178, 308078.6404711178, 308078.6404711178, 308078.6404711178, 308078.6316069992, 308078.6316069992, 308078.6316069992, 308078.62274287606, 308078.62274287606, 308078.62274287606, 308078.62274287606, 308078.62274287606, 308078.62274287606, 308078.62274287606, 308078.62274287606, 308078.62274287606, 308078.62274287606, 308078.62274287606, 308078.61387875513, 308078.61387875513, 308078.61387875513, 308078.61387875513, 308078.61387875513, 308078.61387875513, 308078.6141330099, 308078.605268889, 308078.6050146343, 308078.61387875513, 308078.61387875513, 308078.6050146343, 308078.605268889, 308078.6050146343, 308078.6050146343, 308078.6050146343, 308078.6050146343, 308078.6050146343, 308078.6050146343, 308078.61387875513, 308078.6141330099, 308078.605268889, 308078.6141330099, 308078.605268889, 308078.6141330099, 308078.61387875513, 308078.6141330099, 308078.6141330099, 308078.6141330099, 308078.61387875513, 308078.6141330099, 308078.605268889, 308078.605268889, 308078.6141330099, 308078.6141330099, 308078.6141330099, 308078.6141330099, 308078.61387875513, 308078.6141330099, 308078.6141330099, 308078.6141330099, 308078.6141330099, 308078.6141330099, 308078.62299713073, 308078.62299713073, 308078.6232513854, 308078.6321155086, 308078.6321155086, 308078.6146415193, 308078.6146415193, 308078.6146415193, 308078.6146415193, 308078.6143872646, 308078.6146415193, 308078.6146415193, 308078.6146415193, 308078.6146415193, 308078.6146415193, 308078.6146415193, 308078.6146415193, 308078.6146415193, 308078.6146415193, 308078.6146415193, 308078.6143872646, 308078.6143872646, 308078.6143872646, 308078.6232513854, 308078.6232513854, 308078.6232513854, 308078.6232513854, 308078.6232513854, 308078.6232513854, 308078.6235056402, 308078.63236976333, 308078.63236976333, 308078.63236976333, 308078.63236976333, 308078.63236976333, 308078.64123388194, 308078.64123388194, 308078.64123388194, 308078.64123388194, 308078.64123388194, 308078.64123388194, 308078.64123388194, 308078.65009800275, 308078.65009800275, 308078.65009800275, 308078.65009800275, 308078.65009800275, 308078.6589621259, 308078.6589621259, 308078.6592163805, 308078.6592163805, 308078.66808050126, 308078.66808050126, 308078.66808050126, 308078.66808050126, 308078.6769446222, 308078.6769446222, 308078.6769446222, 308078.6766903675, 308078.6766903675, 308078.6766903675, 308078.6766903675, 308078.6766903675, 308078.6766903675, 308078.68555448845, 308078.68555448845, 308078.68555448845, 308078.68555448845, 308078.68555448845, 308078.6853002338, 308078.6853002338, 308078.6853002338, 308078.68555448845, 308078.6941643547, 308078.6941643547, 308078.6941643547, 308078.6941643547, 308078.6941643547, 308078.6941643547, 308078.7030284755, 308078.7032827301, 308078.7030284755, 308078.7030284755, 308078.7030284755, 308078.7030284755, 308078.7030284755, 308078.7030284755, 308078.71189259645, 308078.712146851, 308078.7210109718, 308078.7301293473, 308078.73038360174, 308078.74862035253, 308078.75773872784, 308078.7668571054, 308078.7759754808, 308078.7848396015, 308078.78509385604, 308078.79395797674, 308078.79395797674, 308078.79395797674, 308078.79395797674, 308078.79395797674, 308078.79395797674, 308078.79395797674, 308078.7937037223, 308078.7937037223, 308078.80256784306, 308078.7937037223, 308078.7937037223, 308078.7937037223, 308078.79344946786, 308078.7937037223, 308078.79344946786, 308078.79344946786, 308078.80256784306, 308078.80256784306, 308078.80256784306, 308078.80256784306, 308078.81168621825, 308078.81168621825, 308078.8208045935, 308078.8296687142, 308078.8296687142, 308078.83878708933, 308078.8479054668, 308078.8572780941, 308078.8663964692, 308078.87576910097, 308078.894005851, 308078.91249685525, 308078.9218694845, 308078.9494788635, 308078.97734249634, 308079.00495187694, 308079.0145787601, 308079.0426966463, 308079.0609333953, 308079.0979154035, 308079.12603328866, 308079.1541511735, 308079.19113317796, 308079.20962418214, 308079.2377420659, 308079.25648732146, 308079.302333444, 308079.3393154484, 308079.35806070315, 308079.376551704, 308079.39529695833, 308079.4137879588, 308079.4598883347, 308079.49737884186, 308079.5434792161, 308079.5807154682, 308079.60832483997, 308079.6270700946, 308079.67317046423, 308079.70077983505, 308079.7471344591, 308079.77499808243, 308079.8026074521, 308079.82135270507, 308079.84896207426, 308079.8768256964, 308079.923688821, 308079.9700434407, 308080.0067711796, 308080.0624984197, 308080.1179714077, 308080.14608927956, 308080.17369864514, 308080.2385442542, 308080.25754375383, 308080.31301673735, 308080.3499987241, 308080.40598021075, 308080.46170744114, 308080.52655304223, 308080.58253452205, 308080.64763437206, 308080.7210898302, 308080.7864439286, 308080.85128952074, 308080.88801724726, 308080.95337133843, 308081.0273352941, 308081.0924351315, 308081.15778921876, 308081.23200741754, 308081.30622561614, 308081.3715796947, 308081.44579788874, 308081.5111519653, 308081.58537015255, 308081.6504699736, 308081.7246881587, 308081.79916059016, 308081.8733787704, 308081.95646106254, 308082.04005185113, 308082.11427002377, 308082.1887424447, 308082.27207897656, 308082.33768727654, 308082.42102380306, 308082.49549621367, 308082.57883273467, 308082.6624235005, 308082.7371501529, 308082.82935077767, 308082.8668412252, 308082.9129415367, 308082.99653229036, 308083.071004682, 308083.1545954298, 308083.23818617687, 308083.3306410322, 308083.4139775239, 308083.4978225107, 308083.5814132454, 308083.6738680854, 308083.7574588137, 308083.84130378766, 308083.8876583274, 308083.9712490479, 308084.0550940137, 308084.1389389762, 308084.22252968745, 308084.3152387506, 308084.40794781235, 308084.45430234075, 308084.53789304045, 308084.6214837372, 308084.71393853927, 308084.7977834749, 308084.8902382725, 308084.9832015567, 308085.06679223734, 308085.1592470224, 308085.24309194146, 308085.32668261265, 308085.41913738765, 308085.5029822993, 308085.59543706756, 308085.6704178661, 308085.77199097816, 308085.84671752417, 308085.9305624195, 308086.0141530655, 308086.09774370614, 308086.1904526973, 308086.27429757954, 308086.3578882129, 308086.45059719356, 308086.5344420661, 308086.61828693317, 308086.710741658, 308086.74823203654, 308086.79458652064, 308086.8870412365, 308086.9708860926, 308087.0633408039, 308087.16465961514, 308087.2482502164, 308087.34070491756, 308087.43341385975, 308087.51700444915, 308087.5722230207, 308087.6094591401, 308087.69330396963, 308087.7857586539, 308087.87846757856, 308087.9711764974, 308088.05476706976, 308088.14722174034, 308088.2310665499, 308088.32352121366, 308088.3698756648, 308088.41623011505, 308088.50007491454, 308088.5925295681, 308088.67637436104, 308088.76908325066, 308088.8617921344, 308088.95424677635, 308089.0380915536, 308089.130800429, 308089.17690062406, 308089.2232550585, 308089.3159639267, 308089.39980869275, 308089.49226330966, 308089.58497216733, 308089.6862908777, 308089.7701356301, 308089.8717085748, 308089.95555332035, 308090.00190773944, 308090.0482621577, 308090.1407167525, 308090.22456148796, 308090.3172703171, 308090.4099791425, 308090.502687962, 308090.5951425418, 308090.68759711355, 308090.7803059247, 308090.82666032785, 308090.87301473226, 308090.96572353615, 308091.0584323341, 308091.1420227955, 308091.23473158886, 308091.32744037855, 308091.41989492485, 308091.5126037074, 308091.5964483921, 308091.6516668732, 308091.6980212593, 308091.78161169775, 308091.8745747053, 308091.9209290869, 308091.96728346986, 308092.0136378497, 308092.1066008478, 308092.1529552271, 308092.24591821735, 308092.33837272844, 308092.43994556717, 308092.4776900839, 308092.52404445596, 308092.61675319483, 308092.70059783605, 308092.79356080847, 308092.88626953436, 308092.9789782589, 308093.07194121764, 308093.1182955756, 308093.1649041726, 308093.2576128838, 308093.3508300709, 308093.4435387746, 308093.5453658044, 308093.63807450276, 308093.73103743466, 308093.82374612574, 308093.91670904995, 308094.0096719682, 308094.10263488477, 308094.1955977976, 308094.28830647, 308094.3812693752, 308094.47397804033, 308094.5669409357, 308094.65964959573, 308094.75235824764, 308094.83671128226, 308094.92941992916, 308094.9846383371, 308095.0309926593, 308095.1239555319, 308095.2255282542, 308095.3184911213, 308095.41145398444, 308095.5044168439, 308095.5885156137, 308095.67236014514, 308095.7653229913, 308095.8116772978, 308095.8582858358, 308095.942130357, 308096.0345847253, 308096.1275475588, 308096.2111378334, 308096.3041006597, 308096.38769093005, 308096.4803995151, 308096.582226414, 308096.6660709081, 308096.7587794799, 308096.8423697338, 308096.926214218, 308097.01892278175, 308097.11163134186, 308097.1952215828, 308097.2876759007, 308097.37152036827, 308097.45511059987, 308097.5478191404, 308097.63166359824, 308097.7152538202, 308097.79884403927, 308097.8912983361, 308097.966278698, 308098.0587329882, 308098.1425774267, 308098.2264218619, 308098.31938460557, 308098.3941107204, 308098.487073457, 308098.58003618976, 308098.6729989186, 308098.77507995395, 308098.86804267485, 308098.9610053898, 308099.053968103, 308099.14693081245, 308099.2398935179, 308099.32424637256, 308099.41695483774, 308099.5099175343, 308099.603388683, 308099.6966055995, 308099.79843235854, 308099.88278519036, 308099.9757478627, 308100.0778288415, 308100.1705372762, 308100.2637541685, 308100.3564625981, 308100.4585435578, 308100.5603702839, 308100.6624512347, 308100.7642779522, 308100.8663588943, 308100.96843983186, 308101.0702665363, 308101.18095731037, 308101.27366570197, 308101.37549239607, 308101.47731908143, 308101.5791457648, 308101.67236259894, 308101.7744435017, 308101.8674060998, 308101.9780968386, 308102.07105942874, 308102.16402201494, 308102.2569845952, 308102.34969294665, 308102.4424012945, 308102.54397370975, 308102.6458003477, 308102.7387629108, 308102.84058954054, 308102.9244337969, 308103.01714212453, 308103.109850444, 308103.20281298825, 308103.2955213026, 308103.3884838392, 308103.4723280773, 308103.56503637857, 308103.65774467855, 308103.7415889064, 308103.83429719927, 308103.92725971155, 308104.01110392914, 308104.112930504, 308104.2058930071, 308104.30746534886, 308104.4001736195, 308104.4928818865, 308104.5858443744, 308104.67855263175, 308104.7715151119, 308104.86447758833, 308104.948830219, 308105.0415384639, 308105.13424670516, 308105.2185993249, 308105.3115617803, 308105.3867961042, 308105.47975855443, 308105.52611266536, 308105.6659376668, 308105.7591543264, 308105.8338801871, 308105.9268426186, 308106.01980504405, 308106.12163153343, 308106.20547566516, 308106.289319796, 308106.3731639235, 308106.47473617294, 308106.5765626406, 308106.66040675517, 308106.7622332148, 308106.85519560846, 308106.9476495547, 308107.0406119408, 308107.13357432315, 308107.2174184169, 308107.31899063126, 308107.4030889416, 308107.4869330274, 308107.57103133097, 308107.66373946785, 308107.74732932285, 308107.8400374551, 308107.93325402495, 308108.0262163702, 308108.1186702709, 308108.21137838846, 308108.29522244143, 308108.37906649336, 308108.4629105421, 308108.54675458756, 308108.6392084657, 308108.73217078205, 308108.8246246553, 308108.9264510216, 308109.01029504975, 308109.10274891264, 308109.18633871287, 308109.27018273144, 308109.3626365842, 308109.46395448985, 308109.5475442795, 308109.64911639655, 308109.73296039825, 308109.81680439436, 308109.9006483895, 308109.98347550846, 308110.0761835525, 308110.1415367721, 308110.20612733794, 308110.2258891909, 308110.2534982265, 308110.27173477155, 308110.26287071686, 308110.27173477155, 308110.27173477155, 308110.27173477155, 308110.27173477155, 308110.27173477155, 308110.27173477155, 308110.27173477155, 308110.2805988261, 308110.2805988261, 308110.2805988261, 308110.2803446082, 308110.2803446082, 308110.2803446082, 308110.2803446082, 308110.2803446082, 308110.2803446082, 308110.2803446082, 308110.2803446082, 308110.2803446082, 308110.2803446082, 308110.2803446082, 308110.2803446082, 308110.289208665, 308110.2889544472, 308110.2889544472, 308110.2889544472, 308110.2889544472, 308110.2889544472, 308110.2889544472, 308110.28870022926, 308110.28870022926, 308110.2975642838, 308110.2975642838, 308110.2975642838, 308110.2975642838, 308110.2975642838, 308110.29731006606, 308110.29731006606, 308110.29731006606, 308110.29731006606, 308110.29705584823, 308110.31478395744, 308110.3327662846, 308110.3418845569, 308110.3418845569, 308110.3418845569, 308110.3418845569, 308110.3418845569, 308110.3418845569, 308110.3507486116, 308110.3507486116, 308110.34163033916, 308110.34163033916, 308110.34163033916, 308110.34163033916, 308110.35049439373, 308110.34163033916, 308110.3507486116, 308110.3507486116, 308110.3507486116, 308110.3507486116, 308110.3507486116, 308110.3596126662, 308110.3596126662, 308110.368222503, 308110.368222503, 308110.368222503, 308110.368222503, 308110.368222503, 308110.368222503, 308110.368222503, 308110.368222503, 308110.368222503, 308110.368222503, 308110.3679682852, 308110.3679682852, 308110.3679682852, 308110.3679682852, 308110.35910423065, 308110.368222503, 308110.368222503, 308110.3679682852, 308110.3679682852, 308110.368222503, 308110.3770865577, 308110.3770865577, 308110.3770865577, 308110.38595061225, 308110.3770865577, 308110.3770865577, 308110.38620482996, 308110.3773407754, 308110.3773407754, 308110.3770865577, 308110.3770865577, 308110.3770865577, 308110.3770865577, 308110.3770865577, 308110.3770865577, 308110.3770865577, 308110.3770865577, 308110.38620482996, 308110.38620482996, 308110.38620482996, 308110.38620482996, 308110.38620482996, 308110.38620482996, 308110.38620482996, 308110.38620482996, 308110.38620482996, 308110.38620482996, 308110.38620482996, 308110.38620482996, 308110.38620482996, 308110.38620482996, 308110.38595061225, 308110.38595061225, 308110.38595061225, 308110.38595061225]
path_y=[4130449.422158592, 4130449.422158592, 4130449.4219554793, 4130449.4330514916, 4130449.4330514916, 4130449.4330514916, 4130449.4330514916, 4130449.4330514916, 4130449.4219554793, 4130449.4328483786, 4130449.4328483786, 4130449.4328483786, 4130449.4328483786, 4130449.4328483786, 4130449.4328483786, 4130449.4328483786, 4130449.4328483786, 4130449.4328483786, 4130449.4328483786, 4130449.4217523662, 4130449.4217523662, 4130449.4217523662, 4130449.421549254, 4130449.421549254, 4130449.421549254, 4130449.421549254, 4130449.421549254, 4130449.421549254, 4130449.4217523662, 4130449.4217523662, 4130449.421549254, 4130449.421549254, 4130449.4217523662, 4130449.4217523662, 4130449.4217523662, 4130449.410859466, 4130449.410859466, 4130449.411062578, 4130449.399966566, 4130449.399966566, 4130449.4001696785, 4130449.3890736653, 4130449.3890736653, 4130449.3781807655, 4130449.3781807655, 4130449.3783838777, 4130449.3783838777, 4130449.400575904, 4130449.4116719165, 4130449.400575904, 4130449.411468804, 4130449.42276793, 4130449.4116719165, 4130449.400575904, 4130449.400575904, 4130449.412078142, 4130449.4235803816, 4130449.4350826186, 4130449.4463817445, 4130449.4465848566, 4130449.435488844, 4130449.435285732, 4130449.4239866068, 4130449.4348795065, 4130449.4237834937, 4130449.4239866068, 4130449.4126874804, 4130449.4126874804, 4130449.4015914677, 4130449.4015914677, 4130449.4015914677, 4130449.4126874804, 4130449.4128905926, 4130449.4128905926, 4130449.4128905926, 4130449.4128905926, 4130449.4128905926, 4130449.4130937057, 4130449.401997693, 4130449.401997693, 4130449.4130937057, 4130449.402200806, 4130449.402200806, 4130449.413296818, 4130449.402200806, 4130449.402403919, 4130449.402403919, 4130449.402403919, 4130449.402403919, 4130449.402607031, 4130449.402607031, 4130449.402607031, 4130449.391714131, 4130449.3919172436, 4130449.3921203567, 4130449.3923234693, 4130449.392526583, 4130449.392526583, 4130449.392729695, 4130449.392729695, 4130449.392932809, 4130449.3931359206, 4130449.382039908, 4130449.382039908, 4130449.382039908, 4130449.3822430223, 4130449.3822430223, 4130449.3822430223, 4130449.3824461335, 4130449.3824461335, 4130449.3824461335, 4130449.3824461335, 4130449.3826492466, 4130449.3826492466, 4130449.3937452594, 4130449.3826492466, 4130449.3939483725, 4130449.3939483725, 4130449.3939483725, 4130449.3939483725, 4130449.3941514855, 4130449.3941514855, 4130449.3941514855, 4130449.3941514855, 4130449.3941514855, 4130449.3941514855, 4130449.3943545986, 4130449.3943545986, 4130449.3943545986, 4130449.3945577107, 4130449.3947608243, 4130449.3947608243, 4130449.3947608243, 4130449.3949639373, 4130449.3949639373, 4130449.3949639373, 4130449.3949639373, 4130449.3949639373, 4130449.3949639373, 4130449.39516705, 4130449.39516705, 4130449.39516705, 4130449.39516705, 4130449.39516705, 4130449.3953701635, 4130449.3953701635, 4130449.3953701635, 4130449.3953701635, 4130449.3953701635, 4130449.3953701635, 4130449.3955732756, 4130449.3955732756, 4130449.3955732756, 4130449.3957763896, 4130449.3957763896, 4130449.3957763896, 4130449.3957763896, 4130449.3957763896, 4130449.3957763896, 4130449.3957763896, 4130449.3957763896, 4130449.3957763896, 4130449.3957763896, 4130449.3957763896, 4130449.395979502, 4130449.395979502, 4130449.395979502, 4130449.395979502, 4130449.395979502, 4130449.395979502, 4130449.407075515, 4130449.407278629, 4130449.3961826153, 4130449.395979502, 4130449.395979502, 4130449.3961826153, 4130449.407278629, 4130449.3961826153, 4130449.3961826153, 4130449.3961826153, 4130449.3961826153, 4130449.3961826153, 4130449.3961826153, 4130449.395979502, 4130449.407075515, 4130449.407278629, 4130449.407075515, 4130449.407278629, 4130449.407075515, 4130449.395979502, 4130449.407075515, 4130449.407075515, 4130449.407075515, 4130449.395979502, 4130449.407075515, 4130449.407278629, 4130449.407278629, 4130449.407075515, 4130449.407075515, 4130449.407075515, 4130449.407075515, 4130449.395979502, 4130449.407075515, 4130449.407075515, 4130449.407075515, 4130449.407075515, 4130449.407075515, 4130449.406872403, 4130449.406872403, 4130449.4179684157, 4130449.4177653017, 4130449.4177653017, 4130449.429267542, 4130449.429267542, 4130449.429267542, 4130449.429267542, 4130449.4181715287, 4130449.429267542, 4130449.429267542, 4130449.429267542, 4130449.429267542, 4130449.429267542, 4130449.429267542, 4130449.429267542, 4130449.429267542, 4130449.429267542, 4130449.429267542, 4130449.4181715287, 4130449.4181715287, 4130449.4181715287, 4130449.4179684157, 4130449.4179684157, 4130449.4179684157, 4130449.4179684157, 4130449.4179684157, 4130449.4179684157, 4130449.4290644284, 4130449.428861316, 4130449.428861316, 4130449.428861316, 4130449.428861316, 4130449.428861316, 4130449.4286582023, 4130449.4286582023, 4130449.4286582023, 4130449.4286582023, 4130449.4286582023, 4130449.4286582023, 4130449.4286582023, 4130449.428455089, 4130449.428455089, 4130449.428455089, 4130449.428455089, 4130449.428455089, 4130449.428251977, 4130449.428251977, 4130449.439347988, 4130449.439347988, 4130449.439144876, 4130449.439144876, 4130449.439144876, 4130449.439144876, 4130449.4389417637, 4130449.4389417637, 4130449.4389417637, 4130449.427845752, 4130449.427845752, 4130449.427845752, 4130449.427845752, 4130449.427845752, 4130449.427845752, 4130449.427642638, 4130449.427642638, 4130449.427642638, 4130449.427642638, 4130449.427642638, 4130449.4165466246, 4130449.4165466246, 4130449.4165466246, 4130449.427642638, 4130449.4163435106, 4130449.4163435106, 4130449.4163435106, 4130449.4163435106, 4130449.4163435106, 4130449.4163435106, 4130449.4161403985, 4130449.4272364117, 4130449.4161403985, 4130449.4161403985, 4130449.4161403985, 4130449.4161403985, 4130449.4161403985, 4130449.4161403985, 4130449.4159372854, 4130449.427033299, 4130449.426830186, 4130449.437723085, 4130449.448819098, 4130449.4706049, 4130449.4814977986, 4130449.492390699, 4130449.503283598, 4130449.503080486, 4130449.514176499, 4130449.513973386, 4130449.513973386, 4130449.513973386, 4130449.513973386, 4130449.513973386, 4130449.513973386, 4130449.513973386, 4130449.502877373, 4130449.502877373, 4130449.5026742597, 4130449.502877373, 4130449.502877373, 4130449.502877373, 4130449.491781361, 4130449.502877373, 4130449.491781361, 4130449.491781361, 4130449.5026742597, 4130449.5026742597, 4130449.5026742597, 4130449.5026742597, 4130449.513567161, 4130449.513567161, 4130449.5244600605, 4130449.5242569475, 4130449.5242569475, 4130449.535149848, 4130449.5460427483, 4130449.5680316607, 4130449.5789245605, 4130449.6009134743, 4130449.622699275, 4130449.655581087, 4130449.6775700008, 4130449.721344714, 4130449.7762154397, 4130449.8199901544, 4130449.8530750796, 4130449.919041819, 4130449.9408276193, 4130450.0065912465, 4130450.0725579862, 4130450.1385247265, 4130450.2042883527, 4130450.2371701673, 4130450.3031369075, 4130450.3471147344, 4130450.41267525, 4130450.4784388766, 4130450.5224167043, 4130450.5552985193, 4130450.599276345, 4130450.6321581593, 4130450.708814688, 4130450.7967703436, 4130450.8734268714, 4130450.950286515, 4130450.9940612293, 4130451.0380390566, 4130451.1146955877, 4130451.158470303, 4130451.2462228457, 4130451.301093575, 4130451.3448682916, 4130451.3888461185, 4130451.4326208346, 4130451.487491564, 4130451.597436134, 4130451.6851886786, 4130451.7398562958, 4130451.8495977544, 4130451.9482432012, 4130452.0142099443, 4130452.057984662, 4130452.178619022, 4130452.2336928644, 4130452.332338312, 4130452.398101944, 4130452.5189394173, 4130452.6286808797, 4130452.749315243, 4130452.8701527184, 4130453.0018830956, 4130453.1112183365, 4130453.254044728, 4130453.3746790937, 4130453.4293467146, 4130453.572173107, 4130453.7037003757, 4130453.8354307557, 4130453.97825715, 4130454.1208804343, 4130454.2635037173, 4130454.4063301133, 4130454.548953398, 4130454.6917797956, 4130454.8344030804, 4130454.966133464, 4130455.1087567527, 4130455.262476054, 4130455.4050993416, 4130455.547519522, 4130455.712131728, 4130455.854755019, 4130456.0084743234, 4130456.1619905187, 4130456.315912933, 4130456.4694291293, 4130456.6231484353, 4130456.7766646342, 4130456.9412768465, 4130457.1060921666, 4130457.2594052576, 4130457.347360926, 4130457.4240174717, 4130457.5886296853, 4130457.7423489974, 4130457.9069612133, 4130458.0715734316, 4130458.23598254, 4130458.3894987456, 4130458.565206978, 4130458.7298191967, 4130458.894228311, 4130459.058840531, 4130459.234548767, 4130459.3223013296, 4130459.4869135534, 4130459.6626217896, 4130459.838330027, 4130460.002942254, 4130460.1784473853, 4130460.3539525187, 4130460.441705084, 4130460.6063173134, 4130460.770929542, 4130460.9353386643, 4130461.1110469094, 4130461.2754560327, 4130461.4620571835, 4130461.6266694176, 4130461.791078544, 4130461.966786792, 4130462.131399026, 4130462.295808158, 4130462.471516407, 4130462.635925539, 4130462.811836896, 4130462.987138936, 4130463.151954282, 4130463.327662535, 4130463.4922747775, 4130463.6568870195, 4130463.8323921687, 4130464.008100426, 4130464.1727126706, 4130464.3482178235, 4130464.5239260825, 4130464.699634342, 4130464.864043487, 4130464.951999169, 4130465.039751747, 4130465.20416089, 4130465.3798691533, 4130465.544278299, 4130465.7084843414, 4130465.873096594, 4130466.0375057436, 4130466.2130109062, 4130466.3776231604, 4130466.4651726377, 4130466.542032312, 4130466.717740581, 4130466.8821497345, 4130467.057654901, 4130467.2331600697, 4130467.3977723294, 4130467.562181487, 4130467.7378897597, 4130467.9022989185, 4130467.990051505, 4130468.0778040905, 4130468.253512367, 4130468.4179215287, 4130468.593629806, 4130468.7691349825, 4130468.9446401596, 4130469.109049324, 4130469.284757606, 4130469.4602627847, 4130469.5369193624, 4130469.6246719523, 4130469.8001771336, 4130469.9758854187, 4130470.140294588, 4130470.315799771, 4130470.4800058417, 4130470.65571413, 4130470.8310162146, 4130471.0067245043, 4130471.094477098, 4130471.1822296917, 4130471.346638868, 4130471.522347161, 4130471.697852351, 4130471.8733575437, 4130472.048862736, 4130472.213271918, 4130472.3776811003, 4130472.553186296, 4130472.640938894, 4130472.728691492, 4130472.90419669, 4130473.079701889, 4130473.244314176, 4130473.4198193755, 4130473.5953245754, 4130473.7597337654, 4130473.9352389686, 4130474.1109472737, 4130474.1984967757, 4130474.2862493764, 4130474.4508616696, 4130474.637462889, 4130474.725215493, 4130474.812968097, 4130474.900720701, 4130475.087321924, 4130475.175074528, 4130475.3616757514, 4130475.5260849497, 4130475.701387062, 4130475.8004387803, 4130475.8881913866, 4130476.0636966005, 4130476.2394049163, 4130476.4260061434, 4130476.60151136, 4130476.7770165782, 4130476.9636178105, 4130477.051370418, 4130477.1502190423, 4130477.325724262, 4130477.5234215087, 4130477.698926731, 4130477.885324869, 4130478.0608300935, 4130478.2474313313, 4130478.4229365564, 4130478.6095377957, 4130478.796139036, 4130478.9827402774, 4130479.169341521, 4130479.3448467515, 4130479.5314479955, 4130479.7069532285, 4130479.893554474, 4130480.0690597086, 4130480.2445649435, 4130480.4424653035, 4130480.6179705393, 4130480.7055200613, 4130480.793272679, 4130480.979873932, 4130481.1551760742, 4130481.3417773275, 4130481.528378581, 4130481.7149798386, 4130481.901784191, 4130482.0774925314, 4130482.2640937883, 4130482.351846412, 4130482.450695049, 4130482.6264033914, 4130482.790812626, 4130482.977413888, 4130483.142026219, 4130483.328627484, 4130483.493239817, 4130483.668745068, 4130483.8551432397, 4130484.030851589, 4130484.2063568435, 4130484.3709691823, 4130484.546677535, 4130484.7221827907, 4130484.89768805, 4130485.06230039, 4130485.2267096373, 4130485.402417992, 4130485.567030336, 4130485.7425355995, 4130485.918243958, 4130486.0828563026, 4130486.247468651, 4130486.4118779018, 4130486.587789357, 4130486.7521986114, 4130486.9279069747, 4130487.103615338, 4130487.2902166215, 4130487.455032068, 4130487.641633352, 4130487.8282346386, 4130488.0148359244, 4130488.2123301313, 4130488.3989314204, 4130488.585532711, 4130488.772134002, 4130488.958735293, 4130489.1453365837, 4130489.343236983, 4130489.518742265, 4130489.70534356, 4130489.914136882, 4130490.111834192, 4130490.2982323975, 4130490.4961328018, 4130490.6827341006, 4130490.8802283215, 4130491.055733612, 4130491.2534309276, 4130491.4289362174, 4130491.6264304435, 4130491.8128286568, 4130492.010322885, 4130492.1967211, 4130492.394215331, 4130492.5917095626, 4130492.778107781, 4130492.9643029114, 4130493.139808211, 4130493.326206434, 4130493.512604658, 4130493.6990028815, 4130493.8967002113, 4130494.094194452, 4130494.280795769, 4130494.466990908, 4130494.6535922284, 4130494.8401935496, 4130495.0267948727, 4130495.2023001816, 4130495.377805494, 4130495.5531077157, 4130495.7395059518, 4130495.9261072804, 4130496.112505518, 4130496.2882139236, 4130496.46371924, 4130496.6392245586, 4130496.825825889, 4130497.0013312087, 4130497.187932542, 4130497.363640953, 4130497.5391462743, 4130497.7146515977, 4130497.89036001, 4130498.0658653346, 4130498.252466673, 4130498.428175088, 4130498.614573341, 4130498.8011746816, 4130498.976476924, 4130499.151982255, 4130499.327487587, 4130499.514088932, 4130499.689594264, 4130499.8761956124, 4130500.0627969606, 4130500.2606974095, 4130500.436202746, 4130500.6117080837, 4130500.809608535, 4130500.9962098883, 4130501.1832174147, 4130501.3698187694, 4130501.457571441, 4130501.754117492, 4130501.9518148624, 4130502.1166303684, 4130502.303231726, 4130502.4898330853, 4130502.6762313596, 4130502.851939794, 4130503.0276482296, 4130503.203356666, 4130503.37865893, 4130503.565057209, 4130503.7407656475, 4130503.927163929, 4130504.113765296, 4130504.2781746383, 4130504.464776009, 4130504.65137738, 4130504.827085823, 4130505.002388097, 4130505.1891925563, 4130505.3649010016, 4130505.55170546, 4130505.7272108234, 4130505.891823258, 4130506.0673286226, 4130506.2650260148, 4130506.4516273923, 4130506.616036747, 4130506.791542116, 4130506.967250569, 4130507.142959022, 4130507.318667477, 4130507.4943759316, 4130507.658785291, 4130507.845386677, 4130508.0097960383, 4130508.1961943437, 4130508.371902803, 4130508.536312168, 4130508.700924614, 4130508.876633076, 4130509.041042443, 4130509.205248727, 4130509.369861177, 4130509.5451634773, 4130509.7208719435, 4130509.8965804093, 4130510.0722888773, 4130510.203613293, 4130510.37911868, 4130510.521945275, 4130510.6314838296, 4130510.7198457704, 4130510.763620577, 4130510.7854064386, 4130510.7856095196, 4130510.7854064386, 4130510.7854064386, 4130510.7854064386, 4130510.7854064386, 4130510.7854064386, 4130510.7854064386, 4130510.7854064386, 4130510.7852033568, 4130510.7852033568, 4130510.7852033568, 4130510.7741073426, 4130510.7741073426, 4130510.7741073426, 4130510.7741073426, 4130510.7741073426, 4130510.7741073426, 4130510.7741073426, 4130510.7741073426, 4130510.7741073426, 4130510.7741073426, 4130510.7741073426, 4130510.7741073426, 4130510.7739042602, 4130510.7628082475, 4130510.7628082475, 4130510.7628082475, 4130510.7628082475, 4130510.7628082475, 4130510.7628082475, 4130510.751712234, 4130510.751712234, 4130510.7515091524, 4130510.7515091524, 4130510.7515091524, 4130510.7515091524, 4130510.7515091524, 4130510.74041314, 4130510.74041314, 4130510.74041314, 4130510.74041314, 4130510.729317126, 4130510.7289109626, 4130510.739600812, 4130510.750493742, 4130510.750493742, 4130510.750493742, 4130510.750493742, 4130510.750493742, 4130510.750493742, 4130510.75029066, 4130510.75029066, 4130510.73939773, 4130510.73939773, 4130510.73939773, 4130510.73939773, 4130510.739194648, 4130510.73939773, 4130510.75029066, 4130510.75029066, 4130510.75029066, 4130510.75029066, 4130510.75029066, 4130510.7500875783, 4130510.7500875783, 4130510.738788484, 4130510.738788484, 4130510.738788484, 4130510.738788484, 4130510.738788484, 4130510.738788484, 4130510.738788484, 4130510.738788484, 4130510.738788484, 4130510.738788484, 4130510.7276924704, 4130510.7276924704, 4130510.7276924704, 4130510.7276924704, 4130510.7278955523, 4130510.738788484, 4130510.738788484, 4130510.7276924704, 4130510.7276924704, 4130510.738788484, 4130510.7385854013, 4130510.7385854013, 4130510.7385854013, 4130510.7383823204, 4130510.7385854013, 4130510.7385854013, 4130510.749478332, 4130510.749681415, 4130510.749681415, 4130510.7385854013, 4130510.7385854013, 4130510.7385854013, 4130510.7385854013, 4130510.7385854013, 4130510.7385854013, 4130510.7385854013, 4130510.7385854013, 4130510.749478332, 4130510.749478332, 4130510.749478332, 4130510.749478332, 4130510.749478332, 4130510.749478332, 4130510.749478332, 4130510.749478332, 4130510.749478332, 4130510.749478332, 4130510.749478332, 4130510.749478332, 4130510.749478332, 4130510.749478332, 4130510.7383823204, 4130510.7383823204, 4130510.7383823204, 4130510.7383823204]
# 실시간으로 업데이트될 IMU Yaw 값
current_yaw = 0.0

# ROS 콜백 함수: Yaw 값을 업데이트
def imu_callback(data):
    global current_yaw
    current_yaw = data.data

# ROS 노드 초기화
rospy.init_node('imu_plotter', anonymous=True)

# ROS 토픽 구독
rospy.Subscriber("/filtered/imu/yaw", Float64, imu_callback)

# 그래프 설정
fig, ax = plt.subplots()
sc = ax.scatter(path_x[10:30], path_y[10:30], label='Path', color='b')

# 실시간 그래프 업데이트 함수
def update(frame):
    global current_yaw
    ax.clear()

    # 경로 표시
    ax.scatter(path_x[10:30], path_y[10:30], label='Path', color='b')

    # 현재 위치와 방향 (Yaw) 표시 (임의로 현재 위치를 설정함)
    current_x, current_y = [302262.23714331625], [4123476.782366797] # 마지막 경로 포인트를 현재 위치로 가정

    # Yaw 값이 -pi에서 +pi 사이라고 가정
    # Yaw 방향을 화살표로 표시
    arrow_length = 10.0
    arrow_dx = arrow_length * np.cos(current_yaw)  # Yaw 값은 이미 라디안 단위
    arrow_dy = arrow_length * np.sin(current_yaw)  # Yaw 값은 이미 라디안 단위
    ax.arrow(current_x, current_y, arrow_dx, arrow_dy, head_width=1, head_length=1, fc='k', ec='k')

    ax.legend()
    ax.relim()
    ax.autoscale_view()

# 애니메이션
ani = animation.FuncAnimation(fig, update, frames=range(0, 100), blit=False, cache_frame_data=False)

plt.show()