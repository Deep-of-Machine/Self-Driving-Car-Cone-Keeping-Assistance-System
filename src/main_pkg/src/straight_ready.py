#!/usr/bin/env python3

import numpy as np
import rospy
from std_msgs.msg import Float64
import matplotlib.pyplot as plt
import matplotlib.animation as animation

# UTM 경로 (이미 변환된 UTM x, y 좌표)
path_x = [308109.64930342726, 308109.64930342726, 308109.64930342726, 308109.64930342726, 308109.64930342726, 308109.64930342726, 308109.64930342726, 308109.64930342726, 308109.6490492087, 308109.64930342726, 308109.64930342726, 308109.658167484, 308109.658167484, 308109.658167484, 308109.658167484, 308109.658167484, 308109.64930342726, 308109.658167484, 308109.658167484, 308109.64930342726, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6579132654, 308109.6490492087, 308109.6576590469, 308109.64879499015, 308109.6576590469, 308109.6576590469, 308109.64879499015, 308109.64879499015, 308109.6576590469, 308109.6576590469, 308109.6576590469, 308109.6490492087, 308109.64879499015, 308109.64879499015, 308109.64879499015, 308109.64879499015, 308109.64879499015, 308109.64879499015, 308109.64879499015, 308109.64879499015, 308109.6576590469, 308109.64879499015, 308109.64879499015, 308109.64879499015, 308109.64879499015, 308109.64879499015, 308109.64879499015, 308109.64879499015, 308109.6576590469, 308109.64879499015, 308109.64879499015, 308109.64879499015, 308109.64879499015, 308109.6576590469, 308109.6576590469, 308109.6576590469, 308109.6576590469, 308109.6576590469, 308109.6576590469, 308109.6576590469, 308109.6576590469, 308109.6576590469, 308109.6576590469, 308109.6576590469, 308109.6576590469, 308109.6576590469, 308109.64879499015, 308109.64879499015, 308109.6576590469, 308109.6579132654, 308109.6579132654, 308109.6490492087, 308109.6576590469, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6579132654, 308109.6579132654, 308109.6579132654, 308109.6576590469, 308109.64879499015, 308109.64879499015, 308109.64879499015, 308109.6576590469, 308109.6576590469, 308109.6490492087, 308109.6490492087, 308109.6579132654, 308109.6490492087, 308109.6579132654, 308109.6579132654, 308109.6490492087, 308109.6579132654, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6579132654, 308109.6579132654, 308109.6579132654, 308109.6579132654, 308109.6579132654, 308109.6579132654, 308109.6579132654, 308109.6579132654, 308109.6579132654, 308109.6579132654, 308109.6579132654, 308109.6579132654, 308109.6579132654, 308109.6579132654, 308109.6579132654, 308109.6490492087, 308109.6579132654, 308109.6579132654, 308109.6579132654, 308109.6579132654, 308109.6579132654, 308109.6576590469, 308109.6579132654, 308109.6579132654, 308109.6579132654, 308109.6579132654, 308109.6579132654, 308109.6579132654, 308109.6576590469, 308109.6579132654, 308109.6579132654, 308109.6490492087, 308109.6579132654, 308109.6490492087, 308109.6490492087, 308109.6576590469, 308109.6490492087, 308109.64879499015, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.64879499015, 308109.64879499015, 308109.6490492087, 308109.6490492087, 308109.64879499015, 308109.64879499015, 308109.64879499015, 308109.64879499015, 308109.64879499015, 308109.64879499015, 308109.64879499015, 308109.64879499015, 308109.64879499015, 308109.64879499015, 308109.64879499015, 308109.64879499015, 308109.64879499015, 308109.64879499015, 308109.6490492087, 308109.64879499015, 308109.64879499015, 308109.64879499015, 308109.64879499015, 308109.64879499015, 308109.6490492087, 308109.64879499015, 308109.6490492087, 308109.6490492087, 308109.64879499015, 308109.64879499015, 308109.64879499015, 308109.64879499015, 308109.64879499015, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.6579132654, 308109.6579132654, 308109.6579132654, 308109.6579132654, 308109.6579132654, 308109.6579132654, 308109.6579132654, 308109.6579132654, 308109.6579132654, 308109.6579132654, 308109.6579132654, 308109.6579132654, 308109.6579132654, 308109.6579132654, 308109.6579132654, 308109.6579132654, 308109.6579132654, 308109.6579132654, 308109.6579132654, 308109.6579132654, 308109.6490492087, 308109.6579132654, 308109.6490492087, 308109.6490492087, 308109.6490492087, 308109.64879499015, 308109.64854077157, 308109.6394224963, 308109.63005000236, 308109.6118134516, 308109.60269517626, 308109.5930684613, 308109.5748319102, 308109.5565953592, 308109.54722286493, 308109.5196138193, 308109.4917505547, 308109.46439572505, 308109.44590495445, 308109.4185501267, 308109.39980513474, 308109.38106014713, 308109.34458704037, 308109.32609626895, 308109.2799964471, 308109.23389662674, 308109.20603335893, 308109.1781700885, 308109.15030681994, 308109.1224435511, 308109.08571622404, 308109.04873467516, 308109.0208714051, 308108.96539908333, 308108.9284175326, 308108.8911817641, 308108.8268453789, 308108.78986382834, 308108.75262805773, 308108.7156465037, 308108.66954667325, 308108.6237010595, 308108.55911045044, 308108.51301061496, 308108.466910781, 308108.42081094626, 308108.3747111084, 308108.32835705194, 308108.2822572125, 308108.23590315424, 308108.19841315463, 308108.15231331275, 308108.10595925193, 308108.0507411283, 308108.0043870654, 308107.93042393745, 308107.88432409306, 308107.8377158043, 308107.7913617374, 308107.736143607, 308107.6895353175, 308107.6244362406, 308107.56896388787, 308107.5223555948, 308107.4483924521, 308107.41064821754, 308107.3549216363, 308107.3083133363, 308107.270569099, 308107.2150967379, 308107.14948920417, 308107.1028809019, 308107.0195452406, 308106.9640728713, 308106.91746456525, 308106.825519057, 308106.77004668565, 308106.7145743108, 308106.6588477151, 308106.57551203866, 308106.4924305817, 308106.43670398055, 308106.3812315983, 308106.325759217, 308106.24216930673, 308106.18669692, 308106.1309703117, 308106.0387705533, 308105.9551806328, 308105.89945401676, 308105.8161183165, 308105.75152763264, 308105.70466507855, 308105.640328615, 308105.5934660586, 308105.51013034536, 308105.44553965586, 308105.36194971413, 308105.30622308387, 308105.25961474364, 308105.1950240453, 308105.1392974133, 308105.0835707776, 308105.02784414287, 308104.97211750457, 308104.8973916118, 308104.84166497254, 308104.7948023983, 308104.73907575407, 308104.68334911077, 308104.62762246374, 308104.57189581776, 308104.4883058439, 308104.4325791922, 308104.37659831677, 308104.31200759474, 308104.2560267139, 308104.1724367308, 308104.11645584635, 308104.0518651197, 308103.9958842322, 308103.91204001434, 308103.8284500162, 308103.7724691229, 308103.7164882304, 308103.66076155973, 308103.6047806643, 308103.53993569594, 308103.4750907258, 308103.41024575627, 308103.31753744406, 308103.2526924679, 308103.1881017183, 308103.09513917146, 308103.0216843453, 308102.9568393637, 308102.89174015156, 308102.8268951663, 308102.7623044036, 308102.6604777688, 308102.58676870406, 308102.5219237108, 308102.4482146421, 308102.3377781501, 308102.2729331504, 308102.1992240749, 308102.13412484206, 308102.06927983684, 308101.9671989463, 308101.86562650633, 308101.800527264, 308101.70756466466, 308101.64271964564, 308101.56875632383, 308101.50391130114, 308101.4388120508, 308101.3739670267, 308101.280495949, 308101.18753332825, 308101.09431647294, 308101.03808128485, 308100.9729820185, 308100.9167468247, 308100.8605116316, 308100.7868025139, 308100.72170324, 308100.6198765207, 308100.51804979483, 308100.42483291106, 308100.3597336269, 308100.303498419, 308100.23839913117, 308100.1732998438, 308100.1170646284, 308100.06082941376, 308099.95874843316, 308099.90251321194, 308099.8374139145, 308099.77231461275, 308099.6704878494, 308099.6142526226, 308099.54915331444, 308099.4840540044, 308099.41895469464, 308099.32573776325, 308099.26089267724, 308099.1590658915, 308099.06559471844, 308098.99163131777, 308098.9267862225, 308098.86168689677, 308098.78772348765, 308098.7140143077, 308098.6207973469, 308098.5187163024, 308098.41663525556, 308098.35153591307, 308098.27757248835, 308098.22133722453, 308098.14737379574, 308098.0820202157, 308098.01717509556, 308097.9150940244, 308097.849740435, 308097.75652343995, 308097.6825599966, 308097.6174606328, 308097.5521070367, 308097.47788935434, 308097.4041801352, 308097.3302166835, 308097.2190172665, 308097.14505380695, 308097.070836112, 308096.9971268836, 308096.9142993344, 308096.84033586597, 308096.76611816185, 308096.6921546912, 308096.5900735626, 308096.4877381957, 308096.38514858996, 308096.3111851053, 308096.23696738645, 308096.1716137476, 308096.106260109, 308096.03229661554, 308095.967197205, 308095.8559977242, 308095.78177999076, 308095.6794445847, 308095.60522684554, 308095.5310091018, 308095.4659096791, 308095.3916919308, 308095.3177284155, 308095.2437649002, 308095.1698013805, 308095.05860186246, 308094.9935024264, 308094.9106748119, 308094.84532113385, 308094.7624935146, 308094.69739407033, 308094.6145664465, 308094.540602908, 308094.4666393696, 308094.35569405573, 308094.2814762732, 308094.170530951, 308094.05983986054, 308093.9944861579, 308093.89240491204, 308093.8273054436, 308093.76220597094, 308093.6598704775, 308093.594771, 308093.5296715229, 308093.4645720438, 308093.39921832306, 308093.3341188379, 308093.2690193531, 308093.20366562635, 308093.1385661355, 308093.07346664486, 308092.9802494487, 308092.90603162406, 308092.80395032687, 308092.72998673486, 308092.66488723026, 308092.5909236317, 308092.5258241254, 308092.4518605226, 308092.3500334468, 308092.2758156023, 308092.2107160848, 308092.1086347597, 308092.04353523965, 308091.9695716222, 308091.904472096, 308091.83937257016, 308091.7742730402, 308091.6721916958, 308091.59822806914, 308091.49614671705, 308091.4224373227, 308091.3484736864, 308091.2745100478, 308091.2094105042, 308091.1354468615, 308091.0614832166, 308090.9594018439, 308090.857066224, 308090.79196666635, 308090.6898852793, 308090.6247857191, 308090.55082205834, 308090.4857224942, 308090.4203686848, 308090.3464050178, 308090.24432361126, 308090.1703599389, 308090.0768883828, 308089.9745527227, 308089.9005890419, 308089.82662535895, 308089.7615257739, 308089.68730784487, 308089.58522640925, 308089.51100847684, 308089.40006293484, 308089.3258449945, 308089.2146452018, 308089.140681498, 308089.0753276488, 308089.0099737998, 308088.9360100896, 308088.8245560357, 308088.71335621923, 308088.64800235943, 308088.5649202946, 308088.453720466, 308088.3706383948, 308088.29642042186, 308088.22220244876, 308088.13912036986, 308088.0649023898, 308087.9906844094, 308087.90760232287, 308087.7964024639, 308087.7310485751, 308087.6568305843, 308087.58261258877, 308087.5083945909, 308087.4341765931, 308087.3227224649, 308087.24850446114, 308087.18315055576, 308087.07169641764, 308086.9974784034, 308086.92326038907, 308086.84017826617, 308086.7659602447, 308086.6917422231, 308086.5802880614, 308086.497205927, 308086.42298789695, 308086.3026696151, 308086.228451579, 308086.145115187, 308086.07089714374, 308085.996679098, 308085.92246105225, 308085.8110068537, 308085.7365345534, 308085.6253345923, 308085.55998064124, 308085.4948809326, 308085.429781222, 308085.36468151177, 308085.29958179744, 308085.2438546823, 308085.15089140914, 308085.08630018285, 308085.0027095055, 308084.9469823834, 308084.8915095095, 308084.81703717855, 308084.76156429935, 308084.68734621175, 308084.6133823717, 308084.54828263604, 308084.50192810973, 308084.4467094736, 308084.4003549431, 308084.3540004117, 308084.29852752446, 308084.2433088818, 308084.18783599214, 308084.1323630989, 308084.0768902068, 308083.99355373974, 308083.92921673466, 308083.87374383584, 308083.8180166894, 308083.7346802136, 308083.6700889511, 308083.62322591036, 308083.5763628662, 308083.5206357125, 308083.464654306, 308083.3808093216, 308083.29696433165, 308083.2409829193, 308083.15688367444, 308083.10090226075, 308083.0449208431, 308082.9800753144, 308082.9152297839, 308082.8134022993, 308082.7206931774, 308082.6558476377, 308082.59074784606, 308082.4977844653, 308082.4326846691, 308082.33972127945, 308082.24650363775, 308082.18165808474, 308082.1165582794, 308082.05145847437, 308081.986612916, 308081.92151310504, 308081.847803431, 308081.78270361613, 308081.7176038015, 308081.652503983, 308081.5876584136, 308081.52255859354, 308081.42047679995, 308081.3642410882, 308081.2902771459, 308081.22517731495, 308081.131959624, 308081.038741929, 308080.9650322285, 308080.9087965045, 308080.8067146834, 308080.7507332094, 308080.69475173193, 308080.61090664, 308080.56429778296, 308080.48070693854, 308080.4156070861, 308080.359371347, 308080.3223893604, 308080.2851531182, 308080.2570352482, 308080.2291716307, 308080.2104263836, 308080.18256276543, 308080.1638175156, 308080.14532652084, 308080.14507226786, 308080.13569964404, 308080.13569964404, 308080.13569964404, 308080.1359538969, 308080.1359538969, 308080.1359538969, 308080.1362081497, 308080.1362081497, 308080.1362081497, 308080.14507226786, 308080.1362081497, 308080.14507226786, 308080.14481801505, 308080.14507226786, 308080.14507226786, 308080.14507226786, 308080.14507226786, 308080.14507226786, 308080.14507226786, 308080.14507226786, 308080.14507226786, 308080.14507226786, 308080.14507226786, 308080.14507226786, 308080.14507226786, 308080.14507226786, 308080.14481801505, 308080.14481801505, 308080.14481801505, 308080.14481801505, 308080.14481801505, 308080.14507226786, 308080.14507226786, 308080.14507226786, 308080.14507226786, 308080.14507226786, 308080.14507226786, 308080.14532652084, 308080.14507226786, 308080.14507226786, 308080.15419064113, 308080.14532652084, 308080.14532652084, 308080.14507226786, 308080.14532652084, 308080.14507226786, 308080.14507226786, 308080.14507226786, 308080.14532652084, 308080.14507226786, 308080.14507226786, 308080.14532652084, 308080.14532652084, 308080.14507226786, 308080.14507226786, 308080.14507226786, 308080.14532652084, 308080.14532652084, 308080.14532652084, 308080.14532652084, 308080.14532652084, 308080.14532652084, 308080.14532652084, 308080.14532652084, 308080.14532652084, 308080.14532652084, 308080.14532652084, 308080.14532652084, 308080.14532652084, 308080.14532652084, 308080.14507226786, 308080.14532652084, 308080.14532652084, 308080.14532652084, 308080.14532652084, 308080.14532652084, 308080.14532652084, 308080.14532652084, 308080.14507226786, 308080.14532652084, 308080.14532652084, 308080.14532652084, 308080.14532652084, 308080.14532652084, 308080.14507226786, 308080.14532652084, 308080.14507226786, 308080.14532652084, 308080.14532652084, 308080.14532652084, 308080.15419064113, 308080.15419064113, 308080.14532652084, 308080.14532652084, 308080.14532652084, 308080.14532652084, 308080.14532652084, 308080.14532652084, 308080.14532652084, 308080.14532652084, 308080.14532652084, 308080.14532652084, 308080.14532652084, 308080.14532652084, 308080.14532652084, 308080.14532652084, 308080.14532652084, 308080.14532652084, 308080.14532652084, 308080.14532652084]
path_y = [4130508.779132408, 4130508.779132408, 4130508.779132408, 4130508.779132408, 4130508.779132408, 4130508.779132408, 4130508.779132408, 4130508.779132408, 4130508.768036396, 4130508.779132408, 4130508.779132408, 4130508.778929326, 4130508.778929326, 4130508.778929326, 4130508.778929326, 4130508.778929326, 4130508.779132408, 4130508.778929326, 4130508.778929326, 4130508.779132408, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.767833313, 4130508.768036396, 4130508.756737299, 4130508.756940382, 4130508.756737299, 4130508.756737299, 4130508.756940382, 4130508.756940382, 4130508.756737299, 4130508.756737299, 4130508.756737299, 4130508.768036396, 4130508.756940382, 4130508.756940382, 4130508.756940382, 4130508.756940382, 4130508.756940382, 4130508.756940382, 4130508.756940382, 4130508.756940382, 4130508.756737299, 4130508.756940382, 4130508.756940382, 4130508.756940382, 4130508.756940382, 4130508.756940382, 4130508.756940382, 4130508.756940382, 4130508.756737299, 4130508.756940382, 4130508.756940382, 4130508.756940382, 4130508.756940382, 4130508.756737299, 4130508.756737299, 4130508.756737299, 4130508.756737299, 4130508.756737299, 4130508.756737299, 4130508.756737299, 4130508.756737299, 4130508.756737299, 4130508.756737299, 4130508.756737299, 4130508.756737299, 4130508.756737299, 4130508.756940382, 4130508.756940382, 4130508.756737299, 4130508.767833313, 4130508.767833313, 4130508.768036396, 4130508.756737299, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.767833313, 4130508.767833313, 4130508.767833313, 4130508.756737299, 4130508.756940382, 4130508.756940382, 4130508.756940382, 4130508.756737299, 4130508.756737299, 4130508.768036396, 4130508.768036396, 4130508.767833313, 4130508.768036396, 4130508.767833313, 4130508.767833313, 4130508.768036396, 4130508.767833313, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.767833313, 4130508.767833313, 4130508.767833313, 4130508.767833313, 4130508.767833313, 4130508.767833313, 4130508.767833313, 4130508.767833313, 4130508.767833313, 4130508.767833313, 4130508.767833313, 4130508.767833313, 4130508.767833313, 4130508.767833313, 4130508.767833313, 4130508.768036396, 4130508.767833313, 4130508.767833313, 4130508.767833313, 4130508.767833313, 4130508.767833313, 4130508.756737299, 4130508.767833313, 4130508.767833313, 4130508.767833313, 4130508.767833313, 4130508.767833313, 4130508.767833313, 4130508.756737299, 4130508.767833313, 4130508.767833313, 4130508.768036396, 4130508.767833313, 4130508.768036396, 4130508.768036396, 4130508.756737299, 4130508.768036396, 4130508.756940382, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.756940382, 4130508.756940382, 4130508.768036396, 4130508.768036396, 4130508.756940382, 4130508.756940382, 4130508.756940382, 4130508.756940382, 4130508.756940382, 4130508.756940382, 4130508.756940382, 4130508.756940382, 4130508.756940382, 4130508.756940382, 4130508.756940382, 4130508.756940382, 4130508.756940382, 4130508.756940382, 4130508.768036396, 4130508.756940382, 4130508.756940382, 4130508.756940382, 4130508.756940382, 4130508.756940382, 4130508.768036396, 4130508.756940382, 4130508.768036396, 4130508.768036396, 4130508.756940382, 4130508.756940382, 4130508.756940382, 4130508.756940382, 4130508.756940382, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.767833313, 4130508.767833313, 4130508.767833313, 4130508.767833313, 4130508.767833313, 4130508.767833313, 4130508.767833313, 4130508.767833313, 4130508.767833313, 4130508.767833313, 4130508.767833313, 4130508.767833313, 4130508.767833313, 4130508.767833313, 4130508.767833313, 4130508.767833313, 4130508.767833313, 4130508.767833313, 4130508.767833313, 4130508.767833313, 4130508.768036396, 4130508.767833313, 4130508.768036396, 4130508.768036396, 4130508.768036396, 4130508.756940382, 4130508.7458443693, 4130508.734951439, 4130508.7129624956, 4130508.6911766347, 4130508.680283705, 4130508.647198748, 4130508.625412887, 4130508.6036270256, 4130508.581638083, 4130508.5378632783, 4130508.4829924605, 4130508.4503136715, 4130508.417431798, 4130508.384753007, 4130508.3407751196, 4130508.296797234, 4130508.253225513, 4130508.2203436405, 4130508.1436869632, 4130508.0670302873, 4130508.01215947, 4130507.957288655, 4130507.9024178386, 4130507.847547024, 4130507.79287929, 4130507.727115545, 4130507.6722447276, 4130507.5735991104, 4130507.507835365, 4130507.430975607, 4130507.3325330745, 4130507.2667693286, 4130507.189909571, 4130507.124145827, 4130507.047489154, 4130506.9819284943, 4130506.8723899475, 4130506.7957332754, 4130506.7190766027, 4130506.642419931, 4130506.5657632584, 4130506.478010573, 4130506.401353901, 4130506.3136012177, 4130506.2256454476, 4130506.1489887787, 4130506.0612360938, 4130505.973686494, 4130505.88593381, 4130505.754406328, 4130505.6777496575, 4130505.5789009626, 4130505.4911482795, 4130505.403598682, 4130505.3047499885, 4130505.1730194236, 4130505.074373812, 4130504.97552512, 4130504.8439976415, 4130504.744945861, 4130504.63520424, 4130504.536355546, 4130504.4373037703, 4130504.338658162, 4130504.184735575, 4130504.085886882, 4130503.9323704666, 4130503.8337248606, 4130503.734876169, 4130503.5926588536, 4130503.494013248, 4130503.3953676443, 4130503.285626027, 4130503.1321096136, 4130502.989689216, 4130502.879947599, 4130502.781301997, 4130502.682656394, 4130502.518043971, 4130502.41939837, 4130502.309656757, 4130502.1563434354, 4130501.9917310155, 4130501.8819894018, 4130501.7284729965, 4130501.618934471, 4130501.5089897728, 4130501.4105472616, 4130501.300602563, 4130501.1470861603, 4130501.0375476377, 4130500.872935222, 4130500.763193614, 4130500.664344931, 4130500.5548064094, 4130500.445064801, 4130500.3353231926, 4130500.2255815845, 4130500.1158399777, 4130499.9510244797, 4130499.8412828734, 4130499.731338179, 4130499.621596574, 4130499.5118549685, 4130499.402113362, 4130499.292371757, 4130499.1277593514, 4130499.018017746, 4130498.8971801302, 4130498.7876416147, 4130498.666803998, 4130498.5021915953, 4130498.3813539795, 4130498.2718154644, 4130498.15097785, 4130497.9752694364, 4130497.8106570346, 4130497.689819421, 4130497.5689818105, 4130497.4592402084, 4130497.338402597, 4130497.2177680735, 4130497.0971335513, 4130496.9764990285, 4130496.800993708, 4130496.6803591857, 4130496.570820678, 4130496.3842193466, 4130496.274883929, 4130496.154249409, 4130496.022518879, 4130495.9018843602, 4130495.792345856, 4130495.605947617, 4130495.4855161887, 4130495.364881674, 4130495.244450247, 4130495.0693511167, 4130494.948716602, 4130494.8282851772, 4130494.69655465, 4130494.575920138, 4130494.3784258943, 4130494.203123679, 4130494.0713931546, 4130493.8847918366, 4130493.7641573274, 4130493.632629894, 4130493.511995386, 4130493.380264864, 4130493.259630356, 4130493.0508370153, 4130492.8642357024, 4130492.666538377, 4130492.5346047683, 4130492.402874249, 4130492.2709406386, 4130492.1390070305, 4130492.018575618, 4130491.886845101, 4130491.700446886, 4130491.514048671, 4130491.316351354, 4130491.1846208395, 4130491.0526872342, 4130490.9209567206, 4130490.789226208, 4130490.657292601, 4130490.5253589973, 4130490.3278647754, 4130490.1959311725, 4130490.0642006616, 4130489.932470151, 4130489.7460719463, 4130489.6141383452, 4130489.482407837, 4130489.3506773286, 4130489.21894682, 4130489.0212495136, 4130488.90061502, 4130488.714216821, 4130488.5054235025, 4130488.3738960917, 4130488.2532616, 4130488.121531094, 4130487.990003684, 4130487.8695722893, 4130487.6718749884, 4130487.474380783, 4130487.2768865773, 4130487.1451560776, 4130487.0136286714, 4130486.881695078, 4130486.7501676725, 4130486.6073411615, 4130486.486706676, 4130486.2892124774, 4130486.1463859677, 4130485.948688675, 4130485.8171612737, 4130485.685430778, 4130485.5426042713, 4130485.399980858, 4130485.279549471, 4130485.148022072, 4130484.9396349625, 4130484.8081075656, 4130484.665484155, 4130484.545052774, 4130484.413728473, 4130484.2822010783, 4130484.1395776705, 4130484.0080502764, 4130483.8105560923, 4130483.6019658945, 4130483.3822796876, 4130483.2507522963, 4130483.1081288937, 4130482.9653023947, 4130482.8224758976, 4130482.690948509, 4130482.5592180253, 4130482.350830931, 4130482.2082075314, 4130481.999617343, 4130481.8569939462, 4130481.714370549, 4130481.5826400677, 4130481.440016672, 4130481.3084892887, 4130481.1769619067, 4130481.045434526, 4130480.8370474414, 4130480.705316964, 4130480.5739926817, 4130480.431166193, 4130480.29984191, 4130480.1681114365, 4130480.0367871555, 4130479.905259779, 4130479.7737324033, 4130479.576441341, 4130479.4338179533, 4130479.236526892, 4130479.0503318463, 4130478.907505363, 4130478.710011208, 4130478.5782807386, 4130478.44655027, 4130478.2379601034, 4130478.1062296364, 4130477.9744991693, 4130477.8427687027, 4130477.6999422233, 4130477.568211758, 4130477.4364812933, 4130477.293654816, 4130477.1619243515, 4130477.030193888, 4130476.832496644, 4130476.689873266, 4130476.492379123, 4130476.360851761, 4130476.229121299, 4130476.097593938, 4130475.9658634784, 4130475.8343361183, 4130475.647937991, 4130475.505314622, 4130475.373584164, 4130475.1760900267, 4130475.04435957, 4130474.912832214, 4130474.781101758, 4130474.649371302, 4130474.5176408486, 4130474.3201467176, 4130474.188619363, 4130473.991125234, 4130473.870693896, 4130473.7391665443, 4130473.607639194, 4130473.4759087428, 4130473.3443813925, 4130473.2128540445, 4130473.0153599204, 4130472.806769784, 4130472.6750393366, 4130472.4775452167, 4130472.3458147696, 4130472.214287423, 4130472.0825569783, 4130471.9397305194, 4130471.808203177, 4130471.6107090614, 4130471.479181719, 4130471.2703884905, 4130471.0617983644, 4130470.930271025, 4130470.7987436857, 4130470.6670132447, 4130470.5243898937, 4130470.326895785, 4130470.184272435, 4130469.986981431, 4130469.8443580824, 4130469.635971069, 4130469.5044437344, 4130469.361617284, 4130469.2187908366, 4130469.0872635045, 4130468.86778048, 4130468.6593934703, 4130468.516567026, 4130468.374146787, 4130468.165759781, 4130468.023339544, 4130467.880716203, 4130467.7380928635, 4130467.595672628, 4130467.4530492905, 4130467.310425952, 4130467.1680057193, 4130466.959618721, 4130466.816792282, 4130466.674168946, 4130466.531545612, 4130466.3889222774, 4130466.2462989446, 4130466.026815939, 4130465.8841926064, 4130465.7413661717, 4130465.5218831687, 4130465.3792598383, 4130465.2366365106, 4130465.094216286, 4130464.951592958, 4130464.80896963, 4130464.589486633, 4130464.4470664132, 4130464.3044430884, 4130464.0851632003, 4130463.9425398763, 4130463.7890236448, 4130463.646400322, 4130463.5037770015, 4130463.3611536804, 4130463.141670693, 4130462.98795136, 4130462.779564387, 4130462.6367379623, 4130462.5050075524, 4130462.373277141, 4130462.24154673, 4130462.109816321, 4130462.000074831, 4130461.8134736773, 4130461.7039352944, 4130461.539323061, 4130461.4295815723, 4130461.330936099, 4130461.1772167715, 4130461.0785712968, 4130460.935947986, 4130460.8044206873, 4130460.6726902835, 4130460.584937716, 4130460.497388257, 4130460.4096356896, 4130460.321883123, 4130460.2232376523, 4130460.1356881927, 4130460.037042723, 4130459.9383972525, 4130459.839751781, 4130459.686235571, 4130459.5877932087, 4130459.489147739, 4130459.379406256, 4130459.2258900483, 4130459.116351675, 4130459.006407086, 4130458.896462499, 4130458.786721019, 4130458.6658835267, 4130458.4901752947, 4130458.3144670646, 4130458.1936295712, 4130458.00682533, 4130457.8859878387, 4130457.7651503496, 4130457.644515968, 4130457.523881588, 4130457.3374835667, 4130457.1619784506, 4130457.041344071, 4130456.909613679, 4130456.723012552, 4130456.591282162, 4130456.4046810353, 4130456.206983898, 4130456.086349523, 4130455.9546191352, 4130455.822888748, 4130455.702254373, 4130455.570523987, 4130455.450092723, 4130455.318362338, 4130455.186631952, 4130455.0549015678, 4130454.9342671973, 4130454.8025368126, 4130454.6050427933, 4130454.4731093016, 4130454.3415820287, 4130454.209851648, 4130454.012154521, 4130453.8144573946, 4130453.694026138, 4130453.5620926474, 4130453.364598635, 4130453.243761159, 4130453.1229236815, 4130452.947215475, 4130452.848366915, 4130452.683754722, 4130452.5520243463, 4130452.4200908584, 4130452.3543272275, 4130452.277467582, 4130452.211500838, 4130452.156630108, 4130452.1126522794, 4130452.05778155, 4130452.013803722, 4130451.9809219055, 4130451.9698258927, 4130451.9478369798, 4130451.9478369798, 4130451.9478369798, 4130451.9589329916, 4130451.9589329916, 4130451.9589329916, 4130451.970029003, 4130451.970029003, 4130451.970029003, 4130451.9698258927, 4130451.970029003, 4130451.9698258927, 4130451.958729881, 4130451.9698258927, 4130451.9698258927, 4130451.9698258927, 4130451.9698258927, 4130451.9698258927, 4130451.9698258927, 4130451.9698258927, 4130451.9698258927, 4130451.9698258927, 4130451.9698258927, 4130451.9698258927, 4130451.9698258927, 4130451.9698258927, 4130451.958729881, 4130451.958729881, 4130451.958729881, 4130451.958729881, 4130451.958729881, 4130451.9698258927, 4130451.9698258927, 4130451.9698258927, 4130451.9698258927, 4130451.9698258927, 4130451.9698258927, 4130451.9809219055, 4130451.9698258927, 4130451.9698258927, 4130451.980718794, 4130451.9809219055, 4130451.9809219055, 4130451.9698258927, 4130451.9809219055, 4130451.9698258927, 4130451.9698258927, 4130451.9698258927, 4130451.9809219055, 4130451.9698258927, 4130451.9698258927, 4130451.9809219055, 4130451.9809219055, 4130451.9698258927, 4130451.9698258927, 4130451.9698258927, 4130451.9809219055, 4130451.9809219055, 4130451.9809219055, 4130451.9809219055, 4130451.9809219055, 4130451.9809219055, 4130451.9809219055, 4130451.9809219055, 4130451.9809219055, 4130451.9809219055, 4130451.9809219055, 4130451.9809219055, 4130451.9809219055, 4130451.9809219055, 4130451.9698258927, 4130451.9809219055, 4130451.9809219055, 4130451.9809219055, 4130451.9809219055, 4130451.9809219055, 4130451.9809219055, 4130451.9809219055, 4130451.9698258927, 4130451.9809219055, 4130451.9809219055, 4130451.9809219055, 4130451.9809219055, 4130451.9809219055, 4130451.9698258927, 4130451.9809219055, 4130451.9698258927, 4130451.9809219055, 4130451.9809219055, 4130451.9809219055, 4130451.980718794, 4130451.980718794, 4130451.9809219055, 4130451.9809219055, 4130451.9809219055, 4130451.9809219055, 4130451.9809219055, 4130451.9809219055, 4130451.9809219055, 4130451.9809219055, 4130451.9809219055, 4130451.9809219055, 4130451.9809219055, 4130451.9809219055, 4130451.9809219055, 4130451.9809219055, 4130451.9809219055, 4130451.9809219055, 4130451.9809219055, 4130451.9809219055]
# 실시간으로 업데이트될 IMU Yaw 값
current_yaw = 0.0

# ROS 콜백 함수: Yaw 값을 업데이트
def imu_callback(data):
    global current_yaw
    current_yaw = data.data

# ROS 노드 초기화
rospy.init_node('imu_plotter', anonymous=True)

# ROS 토픽 구독
rospy.Subscriber("/filtered/imu/yaw", Float64, imu_callback)

# 그래프 설정
fig, ax = plt.subplots()
sc = ax.scatter(path_x[0:-1], path_y[0:-1], label='Path', color='b')

# 실시간 그래프 업데이트 함수
def update(frame):
    global current_yaw
    ax.clear()

    # 경로 표시
    ax.scatter(path_x[0:-1], path_y[0:-1], label='Path', color='b')

    # 현재 위치와 방향 (Yaw) 표시 (임의로 현재 위치를 설정함)
    current_x, current_y = 308109.64930342726, 4130508.779132408 # 마지막 경로 포인트를 현재 위치로 가정

    # Yaw 값이 -pi에서 +pi 사이라고 가정
    # Yaw 방향을 화살표로 표시
    arrow_length = 10.0
    arrow_dx = arrow_length * np.cos(current_yaw)  # Yaw 값은 이미 라디안 단위
    arrow_dy = arrow_length * np.sin(current_yaw)  # Yaw 값은 이미 라디안 단위
    ax.arrow(current_x, current_y, arrow_dx, arrow_dy, head_width=1, head_length=1, fc='k', ec='k')

    ax.legend()
    ax.relim()
    ax.autoscale_view()

# 애니메이션
ani = animation.FuncAnimation(fig, update, frames=range(0, 100), blit=False, cache_frame_data=False)

plt.show()